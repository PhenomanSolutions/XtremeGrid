var Xtreme=function(){"use strict";function t(t){e[t]=null}var e=[],r=[],n={request:function(t){"string"==typeof t&&(t={url:t}),t.url=t.url||"",t.method=t.method||"get",t.data=t.data||{};var e=function(t,e){var r,n=[];for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));return r=n.join("&"),""!=r?e?e.indexOf("?")<0?"?"+r:"&"+r:r:""},r={host:{},process:function(t){var r=this;return this.xhr=null,window.ActiveXObject?this.xhr=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(this.xhr=new XMLHttpRequest),this.xhr&&(this.xhr.onreadystatechange=function(){if(4==r.xhr.readyState&&200==r.xhr.status){var e=r.xhr.responseText;t.json===!0&&"undefined"!=typeof JSON&&(e=JSON.parse(e)),r.doneCallback&&r.doneCallback.apply(r.host,[e,r.xhr])}else 4==r.xhr.readyState&&r.failCallback&&r.failCallback.apply(r.host,[r.xhr]);r.alwaysCallback&&r.alwaysCallback.apply(r.host,[r.xhr])}),"get"==t.method?this.xhr.open("GET",t.url+e(t.data,t.url),!0):(this.xhr.open(t.method,t.url,!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),t.headers&&"object"==typeof t.headers&&this.setHeaders(t.headers),setTimeout(function(){"get"==t.method?r.xhr.send():r.xhr.send(e(t.data))},20),this},done:function(t){return this.doneCallback=t,this},fail:function(t){return this.failCallback=t,this},always:function(t){return this.alwaysCallback=t,this},setHeaders:function(t){for(var e in t)this.xhr&&this.xhr.setRequestHeader(e,t[e])}};return r.process(t)}},o=function(){var t=0,e=0;return{start:function(){return t=+new Date},end:function(){return e=+new Date},duration:function(){return e-t},dispose:function(){var t=r.indexOf(this);t>=0&&r.splice(t,1)}}},i=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return{newGuid:function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},empty:function(){return"00000000-0000-0000-0000-000000000000"}}},s=function(t){var e=this;this.template=t;var r=["properties","styles"];return{replace:function(t,n){var o,i=e.template;for(var s in t)r.indexOf(s)>=0||(o=new RegExp("{"+s+"}","g"),i=i.replace(o,t[s]));if(t.properties){var a=" ";for(var c in t.properties)a+=c+'="'+t.properties[c]+'" ';i=i.replace(/{properties}/i,a)}else i=i.replace(/{properties}/g,"");if(t.styles){var u='style="';for(var l in t.styles)u+=l+": "+t.styles[l]+";";u+='"',i=i.replace(/{styles}/i,u)}else i=i.replace(/{styles}/g,"");return n&&(i=i.replace(/{([^}]+)}/g,"")),i}}},a=function(t,e,r){var n=this[t],o=this,i=function(){return n},s=function(i){var s=!0;if(e&&(s=e.call(o,t,n,i)),s){var a=n;n=i,setTimeout(function(){r.call(o,t,a,i)},1)}return n};delete o[t]&&(o.constructor.defineProperty?o.constructor.defineProperty(o,t,{get:i,set:s}):o.constructor.prototype.__defineGetter__&&o.constructor.prototype.__defineSetter__?(o.constructor.prototype.__defineGetter__.call(o,t,i),o.constructor.prototype.__defineSetter__.call(o,t,s)):Object.defineProperty&&Object.defineProperty(o,t,{get:i,set:s}))},c=function(t){var e=this[t],r=this,n=function(){return e};delete this[t]&&(r.constructor.defineProperty?r.constructor.defineProperty(r,t,{get:n,set:n}):r.constructor.prototype.__defineGetter__&&r.constructor.prototype.__defineSetter__?(r.constructor.prototype.__defineGetter__.call(r,t,n),r.constructor.prototype.__defineSetter__.call(r,t,n)):Object.defineProperty&&Object.defineProperty(r,t,{get:n,set:n}))},u=function(t){var e=this[t];delete this[t],this[t]=e};Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var t=0,e=this.length;e>t;t++)this[t]&&this[t].parentElement&&this[t].parentElement.removeChild(this[t])};var l=function(t,e){var r,n,o;if("object"!=typeof t||null===t)return r=t;r=new t.constructor;for(n in t)e?(o=typeof t[n],r[n]="object"==o&&null!==t[n]?l(t[n]):t[n]):r[n]=t[n];return r},f=function(t,e){var r,n,o;if("object"!=typeof t||null===t)return r=t;r={};for(n in t)e?(o=typeof t[n],r[n]="object"==o&&null!==t[n]?f(t[n]):t[n]):r[n]=t[n];return r};Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,r=Number(arguments[1])||0;for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=e);e>r;r++)if(r in this&&this[r]===t)return r;return-1});var p=function(t){return e[t]},h=function(t,e){p[t]=e};return p.Define=function(t,e){h(t,e)},p.Register=function(r,n){r._dispose=function(){t(n)},r.onChange=function(t,e,n){a.call(r,t,e,n)},r.readOnly=function(t){c.call(r,t)},r.unWatch=function(t){u.call(r,t)},e[n]=r},p.DebugSession=function(t){return r[t]||(r[t]=new o)},p.Guid=new i,p.HtmlTemplate=s,p.Ajax=n,p.clone=function(t,e){return t instanceof Array?l(t,e):f(t,e)},window.$X=window.Xtreme=p,window.X||(window.X=window.Xtreme),p}();